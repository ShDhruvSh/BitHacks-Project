WindowManager:
    CameraWindow:
    ConfirmPhotoWindow:
    InfoWindow:
    ReportWindow:
    EndWindow:

<CameraWindow>:
    name: "main"

    FloatLayout:
    Camera:
        id: camera
        resolution: (2000, 2000)
        play: True
        size_hint: (1.0, 0.8)
        pos_hint: {'x': 0, 'y': 0.2}

    Button:
        text: 'Take Photo'
        size_hint: (1, 0.2)
        pos_hint: {'x': 0, 'y': 0}
        on_press:
            root.onCameraClick()
            app.root.current = "confirm"
            root.manager.transition.direction = "left"


<ConfirmPhotoWindow>:
    name: "confirm"

    Button:
        text: "Touch to see image"
        size_hint: (1, 0.2)
        pos_hint: {'x': 0, 'y': 0.8}
        on_release:
            root.getImage()

    Image:
        id: plate_image
        source: ""
        size_hint: (1, 0.6)
        pos_hint: {'x': 0, 'y': 0.2}

    Button:
        text: "Retake Image"
        size_hint: (0.5, 0.2)
        pos_hint: {'x': 0, 'y': 0}
        on_release:
            app.root.current = "main"
            root.manager.transition.direction = "right"
            root.replaceImage()

    Button:
        text: "Submit Photo"
        size_hint: (0.5, 0.2)
        pos_hint: {'x': 0.5, 'y': 0}
        on_release:
            app.root.current = "second"
            root.manager.transition.direction = "left"



<InfoWindow>:
    name: "second"

    GridLayout:
        cols:1

        GridLayout:
            cols: 1
            Button:
                text: "Take Another Photo"
                on_release:
                    app.root.current = "main"
                    root.manager.transition.direction = "right"

        Button:
            text: "Report Cop"
            on_release:
                app.root.current = "third"
                root.manager.transition.direction = "left"

<ReportWindow>:
    name: "third"

    FloatLayout:
        TextInput:
            id: report
            text: "Type out cop's infraction here"
            foreground_color: (0, 0, 0, 0.4)
            on_touch_down:
                root.clearText()
            multiline: True
            size_hint: (1.0, 0.8)
            pos_hint: {'x': 0, 'y': 0.2}

        Button:
            text: "Review Cop Information"
            size_hint: (0.5, 0.2)
            pos_hint: {'x': 0, 'y': 0}
            on_release:
                app.root.current = "second"
                root.manager.transition.direction = "right"

        Button:
            text: "Submit Report"
            size_hint: (0.5, 0.2)
            pos_hint: {'x': 0.5, 'y': 0}
            on_release:
                root.submitReport()
                app.root.current = "fourth"
                root.manager.transition.direction = "left"


<EndWindow>:
    name: "fourth"

    FloatLayout:
        Label:
            text: "Thank you for your report!"
            size_hint: (1.0, 0.8)
            background_color: (.3, .6, .7, 1)
            pos: (0, 100)

        Button:
            text: "Submit another report"
            size_hint: (0.5, 0.2)
            pos_hint: {'x': 0, 'y': 0}
            on_release:
                app.root.current = "main"
                root.manager.transition.direction = "right"

        Button:
            text: "Quit Application"
            size_hint: (0.5, 0.2)
            pos_hint: {'x': 0.5, 'y': 0}
            on_release:
                app.stop()
